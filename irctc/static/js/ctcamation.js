'use strict';function bx(){function g(){return $('#loginText').text()!=' LOGIN ';}function t(){return $('p-dialog#login_header_disable>div').css('display')=='block';}function u(c){var a=c.loginUsername;a=CryptoJS.AES.decrypt(a,'userID').toString(CryptoJS.enc.Utf8);var b=c.loginPassword;b=CryptoJS.AES.decrypt(b,'TatkalNowPass').toString(CryptoJS.enc.Utf8),a!==''&&(document.querySelector('app-login input#userId').dispatchEvent(new Event('blur')),document.querySelector('app-login input#userId').value=a,document.querySelector('app-login input#userId').dispatchEvent(new Event('input')),sessionStorage.setItem('irloginname',$('input#userId').val().trim()),document.querySelector('app-login input#pwd').dispatchEvent(new Event('blur')),document.querySelector('app-login input#pwd').value=b,document.querySelector('app-login input#pwd').dispatchEvent(new Event('input')),$('div.captcha_div img').length&&(document.querySelector('app-login input#captcha').focus(),$('div.captcha_div').find('img')[0].style='height:60px',$('input#captcha')[0].style='background: white; border-color: red; font-size: 30px;width:300px'),$('app-login input#nlpAnswer').length&&$('app-login input#nlpAnswer').focus());}function v(){chrome.storage.local.get({loginUsername:'',loginPassword:''},function(a){u(a);});}function w(b){var c=b.storedSourceStation;var d=b.storedDestinationStation;var e=b.storedJourneyDate;$('#procstatus1').hide(),document.querySelector('app-jp-input #origin input').dispatchEvent(new Event('focus'),{bubbles:!0}),document.querySelector('app-jp-input #origin input').dispatchEvent(new Event('keydown'),{bubbles:!0}),document.querySelector('app-jp-input #origin input').dispatchEvent(new Event('keyup'),{bubbles:!0}),$('app-jp-input #origin input').prop('value',c),document.querySelector('app-jp-input #origin input').dispatchEvent(new Event('input'),{bubbles:!0}),document.querySelector('app-jp-input #origin input').dispatchEvent(new Event('blur'),{bubbles:!0}),document.querySelector('app-jp-input #destination input').dispatchEvent(new Event('focus'),{bubbles:!0}),document.querySelector('app-jp-input #destination input').dispatchEvent(new Event('keydown'),{bubbles:!0}),document.querySelector('app-jp-input #destination input').dispatchEvent(new Event('keyup'),{bubbles:!0}),$('app-jp-input #destination input').prop('value',d),document.querySelector('app-jp-input #destination input').dispatchEvent(new Event('input'),{bubbles:!0}),document.querySelector('app-jp-input #destination input').dispatchEvent(new Event('blur'),{bubbles:!0});var a=e.split('-');a[0]=('0'+a[0]).slice(-2),a[1]=('0'+a[1]).slice(-2);var f=new Array('January','February','March','April','May','June','July','August','September','October','November','December');var g=parseInt(a[0]);var h=f[parseInt(a[1])-1];var i=a[2];x(g,h,i);}function x(e,f,b){function a(){d&&clearTimeout(d);var h=c.indexOf(f);var i=document.querySelector('p-calendar .ui-datepicker-title .ui-datepicker-month').innerText;i=$.trim(i);var j=c.indexOf(i);var g=document.querySelector('p-calendar .ui-datepicker-title .ui-datepicker-year').innerText;if(g=$.trim(g),g==b)if(j==h){var m=$("p-calendar .ui-datepicker-calendar td:contains('"+e+"')");for(var k=0;k<m.length;k++){var l=m[k];if(l.innerText==e)if($(l).hasClass('ui-state-disabled'))continue;else{l.querySelector('a').click(),$('app-jp-input .search_btn').focus(),document.querySelector('app-jp-input .search_btn').click();break;}}}else j<h?(document.querySelector('p-calendar .ui-datepicker-next').click(),d=setTimeout(a,300)):j>h&&(document.querySelector('p-calendar .ui-datepicker-prev').click(),d=setTimeout(a,300));else parseInt(g)<parseInt(b)?(document.querySelector('p-calendar .ui-datepicker-next').click(),d=setTimeout(a,300)):parseInt(g)>parseInt(b)&&(document.querySelector('p-calendar .ui-datepicker-prev').click(),d=setTimeout(a,300));}var c=new Array('January','February','March','April','May','June','July','August','September','October','November','December');document.querySelector('app-jp-input p-calendar input')&&(document.querySelector('app-jp-input p-calendar input').dispatchEvent(new Event('focus'),{bubbles:!0}),document.querySelector('app-jp-input p-calendar input').dispatchEvent(new Event('keydown'),{bubbles:!0}),document.querySelector('app-jp-input p-calendar input').dispatchEvent(new Event('keyup'),{bubbles:!0}),a());}function y(){chrome.storage.local.get({storedSourceStation:'',storedDestinationStation:'',storedJourneyDate:''},function(a){w(a);});}function z(a){document.querySelector('.search_div p-dropdown label').click(),document.querySelector('.search_div p-dropdown .ui-dropdown-items')!=null&&A(a);}function A(h){var f=h.storedTravelQuota;var g=l[f];var c=document.querySelectorAll('.search_div p-dropdown .ui-dropdown-items li span');var d=!1;for(var b=0;b<c.length;b++){var e='';if(e=c[b].innerText,e==g){c[b].click(),d=!0;break;}}d?a='':console.log('quota not available');}function B(d){var a=d.storedTravelQuota;var b=l[a];var c=document.querySelector('.search_div p-dropdown label').innerText;return b==c;}function C(j){var o=j.storedTravelClass;var p=j.storedTrainNumber.split(':')[0].trim();var q=document.querySelectorAll('app-train-avl-enq .train_avl_enq_box>div>div:nth-of-type(1)');var k=p;var l=o;var b='';var g=!1;for(var d=0;d<q.length;d++){var r=document.querySelectorAll('app-train-avl-enq .train_avl_enq_box>div>div:nth-of-type(1)>div:nth-of-type(1) div')[d];var c=r.innerText;var m='';if(c&&(c=$.trim(c),c.match(/\(\d+\)/g).length>0&&(m=c.match(/\(\d+\)/g)[0].replace(/[\s\(\)]/g,''))),m==k){b=d,g=!0;break;}}if(!(g||g)){$('#procstatus1').show(),$('#procstatus').html('<span style = "color:red">you saved train number '+k+' is not available on this page </span>');return;}var e=document.querySelectorAll('app-train-avl-enq .train_avl_enq_box>div>div:nth-of-type(3)>div:nth-of-type(1) select')[b];var h=e.querySelectorAll('option');var n=!0;for(var f=0;f<h.length;f++)if(h[f].value.match(l)){n=!1,e.value=h[f].value,e.dispatchEvent(new Event('change')),e.dispatchEvent(new Event('blur'));break;}if(n){$('#procstatus1').show(),$('#procstatus').html('<span style = "color:red">The selected berth class \''+l+"' is not available in the saved train. Please check add/edit form</span>");return;}var i=document.querySelectorAll('app-train-avl-enq')[b].querySelector('button#check-availability');if(i!=null)i.focus(),i.click(),D(b,j);else if(!document.querySelectorAll('app-train-avl-enq')[b].querySelector('a#check-availability')){a='';return;}}function D(c,b){function d(){if(!window.location.href.match('/train-list')){clearTimeout(f);return;}f&&clearTimeout(f);var q=document.querySelectorAll('app-train-avl-enq')[c];var a=q.querySelectorAll('p-panel td');var h='';var m=!1;if(a.length>0&&!$('.my-loading').length){for(var b=0;b<a.length;b++){var k=a[b];var s=k.querySelector('div>div:nth-of-type(1) span');var t=$.trim(s.innerText);if(t==r){var l=k.querySelector('div>div:nth-of-type(3)');var u=k.querySelector('div>div:nth-of-type(2)').innerText;$('#procstatus1').show(),$('#procstatus').html(p+'-'+i+'-'+j+'<br>'+u+'<br>'+e+'<br>'+n+'to '+o),l.style.visibility=='visible'&&(h=b,m=!0);break;}}!$('.my-loading').length&&m?(a[h].querySelector('div>div:nth-of-type(3) button').focus(),a[h].querySelector('div>div:nth-of-type(3) button').click(),$('#divMain').find('p-footer button:contains(Ok)').is(':visible')&&$('#divMain').find('p-footer button:contains(Ok)').click(),$('#divMain').find('p-footer button:contains(I Agree)').is(':visible')&&$('#divMain').find('p-footer button:contains(I Agree)').click()):(g(c,l),f=setTimeout(d,2000));}else g(c,l),f=setTimeout(d,1000);}function g(f,g){var c=new Date();var b=c.getHours();var e=c.getMinutes();var d=!1;if(b=='8'|b=='08'|b=='10'|b=='11'&&e<'05'&&(d=!0),d){var a=document.querySelectorAll('app-train-avl-enq')[f];$('p-panel').length?a&&!$('.my-loading').length&&g.style.visibility=='hidden'&&a.querySelector('a#check-availability')&&(a.querySelector('a#check-availability').focus(),a.querySelector('a#check-availability').click()):a&&!$('.my-loading').length&&a.querySelector('a#check-availability')&&a.querySelector('a#check-availability').click();}}var h=b.storedTravelQuota;var i=l[h];var j=b.storedTravelClass;var k=b.storedSourceStation;var m=b.storedDestinationStation;var n=k.split('-')[0];var o=m.split('-')[0];var p=b.storedTrainNumber.split(':')[0].trim();var e=b.storedJourneyDate;var a=e.split('-');a[0]=('0'+a[0]).slice(-2),a[1]=('0'+a[1]).slice(-2);var q=new Array('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec');var r=a[0]+' '+q[parseInt(a[1])-1]+' '+a[2];d();}function E(a){if(!B(a)){z(a);return;}else o&&clearTimeout(o);C(a);}function F(){chrome.storage.local.get({storedSourceStation:'',storedDestinationStation:'',storedTravelQuota:'',storedJourneyDate:'',storedTrainNumber:'',storedTravelClass:''},function(a){E(a);});}function H(f){function d(){console.log('passenger page got 2'),h&&clearTimeout(h);var i=document.querySelectorAll('app-passenger');if(i[a]){console.log('passenger page got 3'),e=c;var g=e[a];var b=document.querySelectorAll('app-passenger')[a];console.log('passenger dts',g),b.querySelector('div.form-group:nth-of-type(1) input').dispatchEvent(new Event('blur')),$(b).find('div.form-group:nth-of-type(1) input').prop('value',g.name),b.querySelector('div.form-group:nth-of-type(1) input').dispatchEvent(new Event('input')),b.querySelector('div.form-group:nth-of-type(2) input').dispatchEvent(new Event('blur')),$(b).find('div.form-group:nth-of-type(2) input').prop('value',g.age),b.querySelector('div.form-group:nth-of-type(2) input').dispatchEvent(new Event('input')),b.querySelector('div.form-group:nth-of-type(3) select').dispatchEvent(new Event('blur')),b.querySelector('div.form-group:nth-of-type(3) select').value=g.gender,b.querySelector('div.form-group:nth-of-type(3) select').dispatchEvent(new Event('change')),g.birthPref==' '&&(g.birthPref=''),g.birthPref!=''&&(b.querySelector('div.form-group:nth-of-type(4) select').dispatchEvent(new Event('blur')),b.querySelector('div.form-group:nth-of-type(4) select').value=g.birthPref,b.querySelector('div.form-group:nth-of-type(4) select').dispatchEvent(new Event('change'))),$(b).find('[formcontrolname="passengerFoodChoice"]').length>0&&(b.querySelector('[formcontrolname="passengerFoodChoice"]').dispatchEvent(new Event('blur')),b.querySelector('[formcontrolname="passengerFoodChoice"]').value=g.Food_Choice,b.querySelector('[formcontrolname="passengerFoodChoice"]').dispatchEvent(new Event('change'))),$(b).find('[formcontrolname="childBerthFlag"]').length>0&&(b.querySelector('[formcontrolname="childBerthFlag"]').checked=g.berthopt,b.querySelector('[formcontrolname="childBerthFlag"]').dispatchEvent(new Event('change')),b.querySelector('[formcontrolname="childBerthFlag"]').dispatchEvent(new Event('blur')),$("button[label='OK'][type='button']:contains(OK)").click()),$(b).find('[formcontrolname="passengerSrCtznConcession"]').length>0&&(b.querySelector('[formcontrolname="passengerSrCtznConcession"]').dispatchEvent(new Event('blur')),b.querySelector('[formcontrolname="passengerSrCtznConcession"]').value=g.SRCTZN,b.querySelector('[formcontrolname="passengerSrCtznConcession"]').dispatchEvent(new Event('change'))),a+=1;}else{var j=document.querySelectorAll('a span.prenext');var k=j[0];k.click(),h=setTimeout(d,200);return;}if(a<e.length){var i=document.querySelectorAll('app-passenger');if(i[a])d();else{var j=document.querySelectorAll('a span.prenext');var k=j[0];k.click(),h=setTimeout(d,200);}}else a>=e.length&&q(f);}var c=f.storedPassengerDetails;for(var b=0;b<=5;b++)if(c[b]!=null){var g=c[b].name;g!=''&&e.push(c[b].name);}console.log('passenger page got 1'),$('#procstatus').html('');var a=0;e.length>0?d():q(f);}function q(c){function b(){j&&clearTimeout(j);var e=document.querySelectorAll('app-infant');if(e[a]){var g=i[a];var d=document.querySelectorAll('app-infant')[a];d.querySelector('div.form-group:nth-of-type(1) input').dispatchEvent(new Event('blur')),$(d).find('div.form-group:nth-of-type(1) input').prop('value',g.child_name),d.querySelector('div.form-group:nth-of-type(1) input').dispatchEvent(new Event('input')),d.querySelector('div.form-group:nth-of-type(2) select').dispatchEvent(new Event('blur')),d.querySelector('div.form-group:nth-of-type(2) select').value=g.child_age,d.querySelector('div.form-group:nth-of-type(2) select').dispatchEvent(new Event('change')),d.querySelector('div.form-group:nth-of-type(3) select').dispatchEvent(new Event('blur')),d.querySelector('div.form-group:nth-of-type(3) select').value=g.child_gender,d.querySelector('div.form-group:nth-of-type(3) select').dispatchEvent(new Event('change')),a+=1;}else{var f=$('.updatesDiv a:contains(Click Here )')[0];f.click(),j=setTimeout(b,200);return;}if(a<i.length){var e=document.querySelectorAll('app-infant');if(e[a])b();else{var f=$('.updatesDiv a:contains(Click Here )')[0];f.click(),j=setTimeout(b,200);}}else a>=i.length&&r(c);}var a=0;i.length>0?($('.updatesDiv a:contains(Click Here )')[0].click(),b()):r(c);}function r(a){var j=a.storedBookingConditions;var c=a.storedMobileNumbera;c=CryptoJS.AES.decrypt(c,'mob_no').toString(CryptoJS.enc.Utf8);var k=a.storedboarding;if($('#procstatus1').hide(),k!==''){$('app-journey-details > div.bookTrain.text-center > div.bookTrain_layer2 > span > a').length&&$('app-journey-details > div.bookTrain.text-center > div.bookTrain_layer2 > span > a')[0].click();var o=setInterval(function(){$('app-boarding-stations > div > table').find('a').each(function(){$(this).text()==k&&(clearInterval(o),this.click());});});}if(j.onlyConfirmBerths&&($('input#autoUpgradation').length&&document.querySelectorAll('#autoUpgradation+label')[0].click(),$('input#confirmberths').length&&document.querySelectorAll('#confirmberths+label')[0].click()),$('input#travelInsuranceOptedYes').length&&(j.insurance=='ins_yes'?(document.querySelector('input#travelInsuranceOptedYes').dispatchEvent(new Event('change')),document.querySelector('input#travelInsuranceOptedYes').checked=!0,document.querySelector('input#travelInsuranceOptedYes').dispatchEvent(new Event('blur'))):(document.querySelector('input#travelInsuranceOptedNo').dispatchEvent(new Event('change')),document.querySelector('input#travelInsuranceOptedNo').checked=!0,document.querySelector('input#travelInsuranceOptedNo').dispatchEvent(new Event('blur')))),$('#gstin-number').length&&a.storedgst_det.gst_opt&&a.storedgst_det.gstnumber!==''&&a.validate&&a.authkey.productID==a.authkey.appID){var p=CryptoJS.AES.decrypt(a.storedgst_det.gstnumber,'gst_no').toString(CryptoJS.enc.Utf8);var q=CryptoJS.AES.decrypt(a.storedgst_det.gstname,'gst_name').toString(CryptoJS.enc.Utf8);var r=CryptoJS.AES.decrypt(a.storedgst_det.pin_number,'gst_pin_number').toString(CryptoJS.enc.Utf8);document.querySelector('#gstin-number').dispatchEvent(new Event('blur')),document.querySelector('#gstin-number').value=p,document.querySelector('#gstin-number').dispatchEvent(new Event('input')),$('#gstin-name').length&&(document.querySelector('#gstin-name').dispatchEvent(new Event('blur')),document.querySelector('#gstin-name').value=q,document.querySelector('#gstin-name').dispatchEvent(new Event('input')),document.querySelector('#gstin-flat').dispatchEvent(new Event('blur')),document.querySelector('#gstin-flat').value=a.storedgst_det.gst_door_no,document.querySelector('#gstin-flat').dispatchEvent(new Event('input')),document.querySelector('#gstin-street').dispatchEvent(new Event('blur')),document.querySelector('#gstin-street').value=a.storedgst_det.street_lane,document.querySelector('#gstin-street').dispatchEvent(new Event('input')),document.querySelector('#gstin-area').dispatchEvent(new Event('blur')),document.querySelector('#gstin-area').value=a.storedgst_det.area_local,document.querySelector('#gstin-area').dispatchEvent(new Event('input')),document.querySelector('#gstin-PIN').dispatchEvent(new Event('blur')),document.querySelector('#gstin-PIN').value=r,document.querySelector('#gstin-PIN').dispatchEvent(new Event('input')),document.querySelector('#gstin-PIN').dispatchEvent(new Event('change')));}if($('#address-flat').is(':visible')&&a.stored_dest_address.dest_add_opt&&a.stored_dest_address.dest_address1!==''&&a.validate&&a.authkey.productID==a.authkey.appID){var t=CryptoJS.AES.decrypt(a.stored_dest_address.dest_address1,'dest_address1').toString(CryptoJS.enc.Utf8);var u=a.stored_dest_address.dest_address2;var v=a.stored_dest_address.dest_address3;var w=CryptoJS.AES.decrypt(a.stored_dest_address.dest_add_pin_number,'dest_add_pin_number').toString(CryptoJS.enc.Utf8);var l=a.stored_dest_address.add_city;var d=a.stored_dest_address.add_postoffice;document.querySelector('#address-flat').dispatchEvent(new Event('blur')),document.querySelector('#address-flat').value=t,document.querySelector('#address-flat').dispatchEvent(new Event('input')),document.querySelector('#address-street').dispatchEvent(new Event('blur')),document.querySelector('#address-street').value=u,document.querySelector('#address-street').dispatchEvent(new Event('input')),document.querySelector('#address-area').dispatchEvent(new Event('blur')),document.querySelector('#address-area').value=v,document.querySelector('#address-area').dispatchEvent(new Event('input')),document.querySelector('#address-PIN').dispatchEvent(new Event('blur')),document.querySelector('#address-PIN').value=w,document.querySelector('#address-PIN').dispatchEvent(new Event('input')),document.querySelector('#address-PIN').dispatchEvent(new Event('change'));var e='';var m=0;var b='';var g=0;function n(){m+=1,e&&clearTimeout(e),document.querySelector('select#address-City').disabled?e=setTimeout(n,1000):document.querySelector("select#address-City option[value='"+l+"']")?(document.querySelector('select#address-City').dispatchEvent(new Event('blur')),document.querySelector('select#address-City').value=l,document.querySelector('select#address-City').dispatchEvent(new Event('input')),document.querySelector('select#address-City').dispatchEvent(new Event('change')),d&&setTimeout(h,250)):m<=4&&(e=setTimeout(n,1000));}function h(){g+=1,b&&clearTimeout(b),document.querySelector('select#address-postOffice').disabled?b=setTimeout(h,1000):document.querySelector("select#address-postOffice option[value='"+d+"']")?(document.querySelector('select#address-postOffice').dispatchEvent(new Event('blur')),document.querySelector('select#address-postOffice').value=d,document.querySelector('select#address-postOffice').dispatchEvent(new Event('input')),document.querySelector('select#address-postOffice').dispatchEvent(new Event('change')),document.querySelector('select#address-postOffice').value!=d?g<=8&&(b=setTimeout(h,1000)):setTimeout(s(a),250)):g<=4&&(b=setTimeout(h,1000));}n();}else s(a);if(c&&document.querySelector('#mobileNumber')){var i=document.querySelector('#mobileNumber');i.dispatchEvent(new Event('blur')),$(i).prop('value',c),i.dispatchEvent(new Event('input'));}var f='';var x=setInterval(function(){$('div.captcha_div img').length&&($('div.captcha_div > span:nth-child(2) > a').click(function(){$('input#captcha').focus(),document.querySelector('input#captcha').scrollIntoView({block:'center'});}),$('div.captcha_div').find('img')[0].style='height:60px',$('input#captcha')[0].style='background: white; border-color: red; font-size: 30px;width:300px',$('input#captcha').is(':visible')&&f!='fcstop'&&(f='fcstop',$('input#captcha').focus(),document.querySelector('input#captcha').scrollIntoView({block:'center'}))),$('input#nlpAnswer').length&&$('input#nlpAnswer').is(':visible')&&f!='fcstop'&&(f='fcstop',$('input#nlpAnswer').focus());},300);}function s(a){var f=a.storedPaymentOption.split('-')[0];f=='UPI_VPA'&&$('#2').length&&$('#2').click();var c='20';var d=new Date();var b=d.getHours();var g=d.getMinutes();var e=!1;if(b=='8'|b=='08'|b=='10'|b=='11'&&g<='15'&&(e=!0),b=='08'&&(c='15'),b=='10'&&(c='10'),b=='11'&&(c='10'),document.querySelector('#divMain > div > app-passenger-input > div > form > div > div > div:nth-child(7) > div > button:nth-child(2)').scrollIntoView({block:'center'}),e&&a.validate&&a.authkey.productID==a.authkey.appID){var h='<button _ngcontent-c27="" class="btn btn-primary"  id = "mycontinue" >Continue</button>';$("div button[type = 'submit']:contains(Continue)").before(h),$("div button[type = 'submit']:contains(Continue)").hide(),$("div button[type = 'button']:contains(Replan)").before('<div id="captcha_time" style="background-color: red; width: 36px; color: white; font-size: 20px;"></div>'),p=setInterval(function(){window.location.href.match('/psgninput')||(k=0,clearInterval(p)),k+=1,$('#captcha_time').text(k);},1000),$('#mycontinue').click(function(){G(),n='',m='',$('app-passenger-input').prepend('<div _ngcontent-c27=""  id = "pleasewait" class="my-loading ng-star-inserted"><div _ngcontent-c27="" class="dimmer"></div><div _ngcontent-c27="" class="loading-bg" style="align-self: center"><span _ngcontent-c27=""><img _ngcontent-c27="" height="30" src="./assets/images/ajax-loader.gif" width="30"></span><span _ngcontent-c27="">Please Wait...</span></div></div>');var a=setInterval(function(){k>=c&&m!='stoptime'&&(clearInterval(a),$('#pleasewait').remove(),m='stoptime',$("div button[type = 'submit']:contains(Continue)").click()),$('#divMain app-passenger-input p-confirmdialog > div').is(':visible')&&n!='snrctzngot'&&(n='snrctzngot',$("button[icon='fa-check'][type='button']:contains(OK)").click());},500);}),a.storedBookingConditions.auto_continue_passenger&&a.authkey.productID==a.authkey.appID&&$('#mycontinue').click();}else a.storedBookingConditions.auto_continue_passenger&&a.authkey.productID==a.authkey.appID&&$("div button[type = 'submit']:contains(Continue)").click();}function I(){setTimeout(function(){chrome.storage.local.get(null,function(a){H(a);});},1000);}function J(e){var d=e.storedTravelQuota;var f=e.storedavllimit;var g=e.storedfarelimit;if($('#procstatus1').show(),document.querySelector('#divMain > div > app-review-booking > div > div.row > div > div.t-body > div.body_div > div > div.header> div > div > button:nth-child(2)').scrollIntoView({block:'center'}),$('app-availability-summary > div > span.ng-star-inserted').text()){var h=document.querySelector('app-fare-summary > div > div.row-fluid1 > div:nth-child(2) > span.t_5 > span').innerText;var b=h.split('.')[0].split(',').join('').substring(1).trim();var c=document.querySelector('app-availability-summary > div > span.ng-star-inserted').innerText.trim();var i=c.split('-')[1];d==='TQ'|d=='GN'&&(i>+f?$('#procstatus').html('Rs: '+b+'<br>'+c+" <br ><span style = 'color:blue' > GOOD LUCK !! </span>"):$('#procstatus').html('Rs: '+b+'<br>'+c+" <br ><span style = 'color:red' > availability is too low or W/L !! </span>")),d==='PT'&&(b<+g?$('#procstatus').html('Rs: '+b+'<br>'+c+" <br ><span style = 'color:blue' > GOOD LUCK !! </span>"):$('#procstatus').html('Rs: '+b+'<br>'+c+" <br ><span style = 'color:red' > fare limit cxceeded !! </span>"));}else a='';$('#divMain app-review-booking button:contains(Continue)').click(function(){$('#divMain').find('p-footer button:contains(Yes)').is(':visible')&&$('#divMain').find('p-footer button:contains(Yes)').click();});}function K(){setTimeout(function(){chrome.storage.local.get({storedautopay:'',storedavllimit:'',storedfarelimit:'',storedTravelQuota:''},function(a){J(a);});},1000);}function L(e){var b=e.storedPaymentOption.split('-');var f=e.storedPaymentDetails;var c=b[0];var a=b[1];var g={AGGREGATOR:'Multiple Payment Service',UPI_VPA:'BHIM/ UPI/ USSD',DEBIT_CARD:'Debit Card with PIN',NETBANKING:'Netbanking',SCAN_AND_PAY:'Bharat QR / Scan & Pay',CASH_CARD:'Wallets / Cash Card',IRCTC_PREPAID:'IRCTC Prepaid',E_WALLET:'IRCTC eWallet',PAY_LATER:'Pay-On-Delivery/Pay later',CREDIT_CARD:'Payment Gateway / Credit Card / Debit Card',IRCTC_IPAY:'IRCTC iPay (Credit Card/Debit Card/UPI)'};var d=g[c];c&&$('p-tabview li a:contains('+d+')').length&&($('p-tabview li a:contains('+d+')')[0].click(),$('#credit_'+a).length&&(document.querySelector('#credit_'+a).dispatchEvent(new Event('change')),$('#credit_'+a).click(),document.querySelector('#credit_'+a).dispatchEvent(new Event('blur'))),$('#credit_'+a+'~div button').length&&$('#credit_'+a+'~div button')[0].click(),'credit_'+a=='credit_96'&&$('#vpa').length&&$('#vpa~div button').length&&($('#vpa').val(f.BHIM_UPI),$('#vpa').val().length>4&&$('#vpa~div button')[0].click()));}function M(){chrome.storage.local.get({storedPaymentDetails:'',storedPaymentOption:''},function(a){L(a);});}function N(){$("img[alt='SUCCESS!']").length?($('#procstatus1').show(),$('#procstatus').html('Congratulations!, You have successfully booked a ticket.')):$('#divMain app-payment-response app-booking-failed > div > div:contains(Choice of Confirm berths not met)').text()?($('#procstatus1').show(),$('#procstatus').html('SORRY !! confirm seats not available').css('color','red')):a='';}function O(){$('app-update-profile > div > div > div.col-md-9 > div:nth-child(5) > div:nth-child(1) > div:nth-child(3) > label').text().length=='10'?$('#profnotsaved').length&&by():a='';}function c(){if(b&&window.clearTimeout(b),t()){a='login_fill_state',a!='train_search'&&v(),b=setTimeout(c,1000);return;}if(window.location.href.match('/train-search')&&$('app-header .h_head1 a').text()&&$('app-jp-input p-calendar input').length&&a!='train_search'){if(!g()){a='login_fill_state',document.querySelector('#loginText').click(),$('.h_main_div .h_head1 span')[0].style='font-size:20px; background:green;color:white;z-index:1100',b=setTimeout(c,1000);return;}a='train_search',y(),b=setTimeout(c,1000);return;}if(window.location.href.match('/train-list')&&$('.search_div p-dropdown label').text()&&a!='train_list'){if(!g()){a='login_fill_state',document.querySelector('#loginText').click(),b=setTimeout(c,1000);return;}a='train_list',F(),b=setTimeout(c,1000);return;}if(window.location.href.match('/psgninput')&&$("div button[type = 'submit']:contains(Continue)").text()&&a!='psginput'){if(!g()){a='login_fill_state',document.querySelector('#loginText').click(),b=setTimeout(c,1000);return;}a='psginput',I(),b=setTimeout(c,1000);return;}if(window.location.href.match('/reviewBooking')&&$("div button[type='submit']:contains(Continue)").is(':visible')&&a!='reviewbooking'){if(!g()){a='login_fill_state',document.querySelector('#loginText').click(),b=setTimeout(c,1000);return;}a='reviewbooking',K(),b=setTimeout(c,1000);return;}if(window.location.href.match('/bkgPaymentOptions')&&$('p-tabview li a').text()&&a!='payment_page'){if(!g()){a='login_fill_state',document.querySelector('#loginText').click(),b=setTimeout(c,1000);return;}a='payment_page',M(),b=setTimeout(c,1000);return;}if(window.location.href.match('/booking-confirm')&&a!='confirm_page'){a='confirm_page',N(),b=setTimeout(c,1000);return;}if(window.location.href.match('/update-profile')&&a!='update_page'){a='update_page',O(),b=setTimeout(c,1000);return;}b=setTimeout(c,1000);}$('body').append(' <div id = "procstatus1" style="display: none ; z-index:1100; width:250px;border-radius:5px; border:1px solid red;background-color:#2aff00; color: black; font-size: 17px;position:fixed; bottom:0; left:0" > <div style ="background-color:blue;color:white;" > processing status </div><div  style = "margin:5px" align="center" id = "procstatus"> </div> </div>');var l={TQ:'TATKAL',PT:'PREMIUM TATKAL',GN:'GENERAL',LD:'LADIES',SS:'LOWER BERTH/SR.CITIZEN',HP:'DIVYAANG'};var o='';var P='';var f='';var d='';var h='';var e=new Array();var i=[];var j='';var k=0;var p='';var m='';var n='';var a='';var b='';c();}$(document).ready(function(){chrome.storage.local.get({storedOn:!1,validate:''},function(a){a.storedOn&&bx();});});